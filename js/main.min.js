var h5ComponentBase=function(a,b){var b=b||{},c=("h5_c_"+Math.random()).replace(".","_"),d="h5_component_"+b.type,e=$('<div class="h5_component '+d+" h5_component_name_"+a+'" id="'+c+'">');return b.text&&e.text(b.text),b.width&&e.width(b.width/2),b.height&&e.height(b.height/2),b.css&&e.css(b.css),b.bg&&e.css("backgroundImage","url("+b.bg+")"),b.center===!0&&e.css({marginLeft:b.width/4*-1+"px",left:"50%"}),"function"==typeof b.onclick&&e.on("click",b.onclick),e.on("onLoad",function(){setTimeout(function(){e.addClass(d+"_load").removeClass(d+"_leave"),b.animateIn&&e.animate(b.animateIn)},b.delay||0)}),e.on("onLeave",function(){setTimeout(function(){e.addClass(d+"_leave").removeClass(d+"_load"),b.animateOut&&e.animate(b.animateOut)},b.delay||0)}),e},h5ComponentBar_v=function(a,b){var c=new h5ComponentBar(a,b),d=100/b.data.length;return c.find(".line").width(d+"%"),$.each(c.find(".rate"),function(){var a=$(this).css("width");$(this).height(a).width("")}),$.each(c.find(".per"),function(){$(this).appendTo($(this).prev(""))}),c},h5ComponentBar=function(a,b){var c=new h5ComponentBase(a,b);return $.each(b.data,function(a,b){var d=$('<div class="line">'),e=$('<div class="name">'),f=$('<div class="rate">'),g=$('<div class="per">'),h=100*b[1]+"%";f.css("width",h);var i="";b[2]&&(i='style="background-color:'+b[2]+'"',g.css("color",b[2])),f.html('<div class="bg" '+i+"></div>"),g.text(h),e.text(b[0]),d.append(e).append(f).append(g),c.append(d)}),c},h5ComponentPie=function(a,b){var c=new h5ComponentBase(a,b),d=b.width,e=b.height,f=d/2,g=document.createElement("canvas"),h=g.getContext("2d");g.width=h.width=d,g.height=h.height=e,$(g).css("zIndex",1),c.append(g),h.beginPath(),h.fillStyle="#eee",h.strokeStyle="#eee",h.lineWidth=1,h.arc(f,f,f,0,2*Math.PI),h.fill(),h.stroke();var i=document.createElement("canvas"),j=i.getContext("2d");i.width=j.width=d,i.height=j.height=e,$(i).css("zIndex",2),c.append(i);for(var k=["red","green","blue","darkred","orange"],l=1.5*Math.PI,m=0,n=2*Math.PI,o=b.data.length,p=0;p<o;p++){var q=b.data[p],r=q[2]||(q[2]=k.pop());m=l+n*q[1],h.beginPath(),h.fillStyle=r,h.strokeStyle=r,h.lineWidth=.1,h.moveTo(f,f),h.arc(f,f,f,l,m),h.fill(),h.stroke(),l=m;var s=$('<div class="text">');s.text(b.data[p][0]),c.append(s);var t=$('<div class="per">');t.text(100*b.data[p][1]+"%"),s.append(t);var u=f+Math.sin(.5*Math.PI-l)*f,v=f+Math.cos(.5*Math.PI-l)*f;u>d/2?s.css("left",u/2):s.css("right",(d-u)/2),v>e/2?s.css("top",v/2):s.css("bottom",(e-v)/2),b.data[p][2]&&s.css("color",b.data[p][2]),s.css("opacity",0)}var w=document.createElement("canvas"),x=w.getContext("2d");w.width=x.width=d,w.height=x.height=e,$(w).css("zIndex",3),c.append(w),x.fillStyle="#eee",x.strokeStyle="#eee",x.lineWidth=1;var y=function(a){x.clearRect(0,0,d,e),x.beginPath(),x.moveTo(f,f),a<=0?(x.arc(f,f,f,0,2*Math.PI),c.find(".text").css("opacity",0)):x.arc(f,f,f,l,l+2*Math.PI*a,!0),x.fill(),x.stroke(),a>=1&&(h5ComponentPie.resort(c.find(".text")),c.find(".text").css("opacity",1),x.clearRect(0,0,d,e))};return y(0),c.on("onLoad",function(){for(var a=0,b=0;b<100;b++)setTimeout(function(){a+=.01,y(a)},10*b+500)}),c.on("onLeave",function(){for(var a=1,b=0;b<100;b++)setTimeout(function(){a-=.01,y(a)},10*b)}),c};h5ComponentPie.resort=function(a){};var h5ComponentPoint=function(a,b){var c=new h5ComponentBase(a,b),d=b.data[0][1];return $.each(b.data,function(a,b){var e=$('<div class="point point_'+a+'">'),f=$('<div class="name">'+b[0]+"</div>"),g=$('<div class="per">'+100*b[1]+"%</div>");f.append(g),e.append(f);var h=b[1]/d*100+"%";e.width(h).height(h),b[2]&&e.css("backgroundColor",b[2]),void 0!=b[3]&&void 0!=b[4]&&(e.css("left",b[3]).css("top",b[4]),e.data("left",b[3]).data("top",b[4])),e.css("zIndex",100-a),e.css("left",0).css("top",0),e.css("transition","all 1s "+.5*a+"s"),c.append(e),c.on("onLoad",function(){c.find(".point").each(function(a,b){$(b).css("left",$(b).data("left")).css("top",$(b).data("top"))})}),c.on("onLeave",function(){c.find(".point").each(function(a,b){$(b).css("left",0).css("top",0)})}),c.find(".point").on("click",function(){return c.find(".point").removeClass("point_focus"),$(this).addClass("point_focus"),!1}).eq(0).addClass("point_focus")}),c},h5ComponentPolyline=function(a,b){var c=new h5ComponentBase(a,b),d=b.width,e=b.height,f=document.createElement("canvas"),g=f.getContext("2d");f.width=g.width=d,f.height=g.height=e,c.append(f);var h=10;g.beginPath(),g.lineWidth=1,g.strokeStyle="#AAA",window.ctx=g;for(var i=0;i<h+1;i++){var j=e/h*i;g.moveTo(0,j),g.lineTo(d,j)}h=b.data.length+1;for(var k=d/h,i=0;i<=h;i++){var l=k*i;if(g.moveTo(l,0),g.lineTo(l,e),i<h-1){var m=$('<div class="text">');m.text(b.data[i][0]),m.css("left",l/2+k/4).css("width",k/2),c.append(m)}}g.stroke();var n=document.createElement("canvas"),o=n.getContext("2d");n.width=o.width=d,n.height=o.height=e,c.append(n);var p=function(a){o.clearRect(0,0,d,e),o.beginPath(),o.lineWidth=3,o.strokeStyle="#ff8878";for(var c=0,f=0,g=1;g<h;g++){var i=b.data[g-1];c=d/h*g,f=e*(1-i[1]*a),o.moveTo(c,f),o.arc(c,f,5,0,2*Math.PI)}o.moveTo(d/h+1,e*(1-b.data[0][1]*a));for(var g=2;g<h;g++){var i=b.data[g-1];c=d/h*g,f=e*(1-i[1]*a),o.lineTo(c,f)}o.stroke(),o.fillStyle="rgba(255,118,118,0)",o.lineWidth=1,o.lineTo(c,e),o.lineTo(d/h+1,e),o.fillStyle="rgba(255,118,118,0.37)",o.fill();for(var g=1;g<h;g++){var i=b.data[g-1];c=d/h*g,f=e*(1-i[1]*a),o.fillStyle=i[2]?i[2]:"#595959",o.fillText(100*i[1]+"%",c-10,f-10)}o.stroke()};return c.on("onLoad",function(){for(var a=0,b=0;b<100;b++)setTimeout(function(){a+=.01,p(a)},10*b+500)}),c.on("onLeave",function(){for(var a=1,b=0;b<100;b++)setTimeout(function(){a-=.01,p(a)},10*b)}),c},h5ComponentRadar=function(a,b){var c=new h5ComponentBase(a,b),d=b.width,e=b.height,f=document.createElement("canvas"),g=f.getContext("2d");f.width=g.width=d,f.height=g.height=e,c.append(f);for(var h=d/2,i=b.data.length,j=!1,k=10;k>0;k--){g.beginPath();for(var l=0;l<i;l++){var m=2*Math.PI/360*(360/i)*l;x=h+Math.sin(m)*h*(k/10),y=h+Math.cos(m)*h*(k/10),g.lineTo(x,y)}g.closePath(),g.fillStyle=(j=!j)?"#99c0ff":"#f1f9ff",g.fill()}for(var l=0;l<i;l++){var m=2*Math.PI/360*(360/i)*l;x=h+Math.sin(m)*h,y=h+Math.cos(m)*h,g.moveTo(h,h),g.lineTo(x,y);var n=$('<div class="text">');n.text(b.data[l][0]),n.css("transition","all 1s "+.5*l+"s"),x>d/2?n.css("left",x/2+5):n.css("right",(d-x)/2+5),y>e/2?n.css("top",y/2+5):n.css("bottom",(e-y)/2+5),b.data[l][2]&&n.css("color",b.data[l][2]),n.css("opacity",0),c.append(n)}g.strokeStyle="#e0e0e0",g.stroke();var o=document.createElement("canvas"),p=o.getContext("2d");o.width=p.width=d,o.height=p.height=e,c.append(o),p.strokeStyle="#f00";var q=function(a){p.clearRect(0,0,d,e),a>=1&&c.find(".text").css("opacity",1),a<=0&&c.find(".text").css("opacity",0);for(var f=0;f<i;f++){var g=2*Math.PI/360*(360/i)*f,j=b.data[f][1]*a;x=h+Math.sin(g)*h*j,y=h+Math.cos(g)*h*j,p.lineTo(x,y)}p.closePath(),p.stroke(),p.fillStyle="#ff7676";for(var f=0;f<i;f++){var g=2*Math.PI/360*(360/i)*f,j=b.data[f][1]*a;x=h+Math.sin(g)*h*j,y=h+Math.cos(g)*h*j,p.beginPath(),p.arc(x,y,5,0,2*Math.PI),p.fill(),p.closePath()}};return c.on("onLoad",function(){for(var a=0,b=0;b<100;b++)setTimeout(function(){a+=.01,q(a)},10*b+500)}),c.on("onLeave",function(){for(var a=1,b=0;b<100;b++)setTimeout(function(){a-=.01,q(a)},10*b)}),c},h5ComponentRing=function(a,b){b.data.length>1&&(b.data=[b.data[0]]),b.type="pie";var c=new h5ComponentPie(a,b);c.addClass("h5_component_ring");var d=$('<div class="mask">');c.append(d);var e=c.find(".text");return e.attr("style",""),b.data[0],[2]&&e.css("color",b.data[0][2]),d.append(e),c},h5_loading=function(a,b){var c=this.id;if(void 0===this._images){this._images=(a||[]).length,this._loaded=0,window[c]=this;for(s in a){var d=a[s],e=new Image;e.src=d,e.onload=function(){window[c].loader()}}return $("#rate").text("0%"),this}return this._loaded++,$("#rate").text(this._loaded/this._images*100>>"0%"),this._loaded<this._images?this:($(".h5_page_face").find(".h5_component").trigger("onLoad"),this.el.fullpage({onLeave:function(a,b,c){$(this).find(".h5_component").trigger("onLeave")},afterLoad:function(a,b){$(this).find(".h5_component").trigger("onLoad")}}),this.el.show(),void(b&&$.fn.fullpage.moveTo(b)))};